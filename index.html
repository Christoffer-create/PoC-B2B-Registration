<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Email</title>
</head>
<body>
    <h1>User Email</h1>

    <p><strong>Email:</strong> <span id="userEmail">Loading...</span></p>

    <script>
        // Fetch user information from the .auth/me endpoint
        fetch('/.auth/me')
            .then(response => response.json())
            .then(data => {
                if (data.length > 0) {
                    // User is authenticated, extract the email
                    const emailClaim = data[0].userClaims.find(claim => claim.typ === 'email');
                    
                    // Display the email on the page
                    document.getElementById('userEmail').textContent = emailClaim ? emailClaim.val : 'Email not available';
                } else {
                    document.getElementById('userEmail').textContent = 'User not authenticated';
                }
            })
            .catch(error => console.error('Error fetching user info:', error));
    </script>
</body>
</html>
